<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Programa de Referidos</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>
  <body class="antialiased bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 selection:bg-neutral-200/60 dark:selection:bg-white/10" style="font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, Apple Color Emoji, Segoe UI Emoji;">
    <div class="min-h-dvh">
      <!-- Header -->
      <header class="border-b border-neutral-200/70 dark:border-white/10">
        <div class="mx-auto max-w-6xl px-6 sm:px-8 py-6 flex items-center justify-between gap-4">
          <div class="flex items-start gap-3">
            <div class="inline-flex h-10 w-10 items-center justify-center rounded-xl ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-white dark:bg-white/5">
              <i data-lucide="link-2" class="h-5 w-5 text-neutral-600 dark:text-neutral-300"></i>
            </div>
            <div class="flex flex-col">
              <h1 class="text-2xl md:text-3xl tracking-tight font-semibold text-neutral-900 dark:text-white">Programa de Referidos</h1>
              <p class="text-sm text-neutral-600 dark:text-neutral-400">Comparte tu enlace, desbloquea niveles y gana recompensas.</p>
              <div class="mt-2 inline-flex items-center gap-2">
                <span id="membership-badge" class="inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium ring-1 ring-inset bg-neutral-100 text-neutral-700 ring-neutral-200 dark:bg-white/5 dark:text-neutral-200 dark:ring-white/10">
                  <i data-lucide="badge-check" class="h-3.5 w-3.5 text-emerald-600 dark:text-emerald-400"></i>
                  <span id="membership-label">Plan</span>
                </span>
                <span id="membership-exp" class="text-xs text-neutral-600 dark:text-neutral-400">Expira: —</span>
              </div>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <button id="theme-toggle" class="inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-white hover:bg-neutral-50 text-neutral-700 dark:bg-white/5 dark:text-neutral-200 dark:hover:bg-white/10">
              <i data-lucide="moon" class="h-4 w-4"></i>
              <span class="hidden sm:inline">Tema</span>
            </button>
          </div>
        </div>
      </header>

      <!-- Main -->
      <main class="mx-auto max-w-6xl px-6 sm:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
          <!-- Left column (7/12) -->
          <section class="lg:col-span-7 space-y-6">
            <!-- Tu enlace de referidos -->
            <div class="rounded-xl ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-white dark:bg-white/5 p-5">
              <div class="flex items-center justify-between">
                <h2 class="text-lg md:text-xl tracking-tight font-semibold text-neutral-900 dark:text-white">Tu enlace de referidos</h2>
              </div>
              <div class="mt-4 space-y-4">
                <!-- Card: Enlace izquierdo -->
                <div class="rounded-lg ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-neutral-50/80 dark:bg-white/[0.03] p-4">
                  <div class="flex flex-col md:flex-row md:items-center gap-3">
                    <div class="shrink-0 inline-flex items-center gap-2">
                      <span class="text-sm font-medium text-neutral-800 dark:text-neutral-200">Enlace izquierdo</span>
                      <span class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px] font-medium bg-neutral-200/50 text-neutral-700 ring-1 ring-inset ring-neutral-300/70 dark:bg-white/10 dark:text-neutral-300 dark:ring-white/10">Left</span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2">
                        <input id="url-left" type="text" readonly class="w-full text-sm px-3 py-2 rounded-md bg-white dark:bg-neutral-900 text-neutral-800 dark:text-neutral-200 ring-1 ring-inset ring-neutral-300 dark:ring-white/10 focus:outline-none select-all" value="">
                        <button data-copy="left" class="inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-sm font-medium bg-neutral-900 text-white hover:bg-neutral-800 ring-1 ring-inset ring-neutral-900/10 dark:bg-white/10 dark:text-neutral-100 dark:hover:bg-white/15 dark:ring-white/10">
                          <i data-lucide="copy" class="h-4 w-4"></i>
                          Copiar
                        </button>
                        <button data-share="left" class="inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-sm font-medium bg-white hover:bg-neutral-50 text-neutral-800 ring-1 ring-inset ring-neutral-300 dark:bg-white/10 dark:text-neutral-200 dark:hover:bg-white/15 dark:ring-white/10">
                          <i data-lucide="share-2" class="h-4 w-4"></i>
                          Compartir
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="mt-3 text-xs text-neutral-600 dark:text-neutral-400" id="counters-left">Referidos activos: — | Referidos totales: —</div>
                </div>

                <!-- Card: Enlace derecho -->
                <div class="rounded-lg ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-neutral-50/80 dark:bg-white/[0.03] p-4">
                  <div class="flex flex-col md:flex-row md:items-center gap-3">
                    <div class="shrink-0 inline-flex items-center gap-2">
                      <span class="text-sm font-medium text-neutral-800 dark:text-neutral-200">Enlace derecho</span>
                      <span class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px] font-medium bg-neutral-200/50 text-neutral-700 ring-1 ring-inset ring-neutral-300/70 dark:bg-white/10 dark:text-neutral-300 dark:ring-white/10">Right</span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2">
                        <input id="url-right" type="text" readonly class="w-full text-sm px-3 py-2 rounded-md bg-white dark:bg-neutral-900 text-neutral-800 dark:text-neutral-200 ring-1 ring-inset ring-neutral-300 dark:ring-white/10 focus:outline-none select-all" value="">
                        <button data-copy="right" class="inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-sm font-medium bg-neutral-900 text-white hover:bg-neutral-800 ring-1 ring-inset ring-neutral-900/10 dark:bg-white/10 dark:text-neutral-100 dark:hover:bg-white/15 dark:ring-white/10">
                          <i data-lucide="copy" class="h-4 w-4"></i>
                          Copiar
                        </button>
                        <button data-share="right" class="inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-sm font-medium bg-white hover:bg-neutral-50 text-neutral-800 ring-1 ring-inset ring-neutral-300 dark:bg-white/10 dark:text-neutral-200 dark:hover:bg-white/15 dark:ring-white/10">
                          <i data-lucide="share-2" class="h-4 w-4"></i>
                          Compartir
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="mt-3 text-xs text-neutral-600 dark:text-neutral-400" id="counters-right">Referidos activos: — | Referidos totales: —</div>
                </div>
              </div>
            </div>

            <!-- Promoción: Viaje a Dubái -->
            <div class="rounded-xl ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-white dark:bg-white/5 overflow-hidden">
              <div class="flex flex-col sm:flex-row">
                <div class="sm:w-44 flex items-center justify-center bg-gradient-to-b from-emerald-500/15 to-emerald-500/5 dark:from-emerald-400/10 dark:to-emerald-400/0 ring-0 p-6 sm:p-0">
                  <div class="sm:h-full sm:w-full flex items-center justify-center">
                    <div class="relative">
                      <div class="absolute inset-0 blur-2xl bg-emerald-500/20 rounded-full"></div>
                      <i data-lucide="plane" class="relative h-12 w-12 text-emerald-600 dark:text-emerald-400"></i>
                    </div>
                  </div>
                </div>
                <div class="flex-1 p-5">
                  <div class="flex items-start justify-between gap-3">
                    <div>
                      <h3 class="text-lg md:text-xl tracking-tight font-semibold text-neutral-900 dark:text-white">Gana un viaje a Dubái</h3>
                      <p class="mt-1 text-sm text-neutral-600 dark:text-neutral-400">Invita y acumula puntos. Al llegar al 100%, desbloqueas el viaje.</p>
                    </div>
                    <span id="promo-deadline" class="shrink-0 inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium bg-emerald-600/10 text-emerald-700 ring-1 ring-inset ring-emerald-600/30 dark:bg-emerald-400/10 dark:text-emerald-300 dark:ring-emerald-400/30">Termina: —</span>
                  </div>
                  <div class="mt-4">
                    <div class="w-full h-2 rounded-full bg-neutral-200 dark:bg-white/10 overflow-hidden">
                      <div id="promo-progress" class="h-2 rounded-full bg-emerald-600 dark:bg-emerald-500" style="width: 0%"></div>
                    </div>
                    <div class="mt-2 flex items-center justify-between text-sm">
                      <span id="promo-percent" class="font-medium text-neutral-800 dark:text-neutral-200">0%</span>
                      <span id="promo-points" class="text-neutral-600 dark:text-neutral-400">Puntos: 0/0</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Límite de Ganancias 10× -->
            <div class="rounded-xl ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-white dark:bg-white/5 p-5">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <h3 class="text-lg md:text-xl tracking-tight font-semibold text-neutral-900 dark:text-white">Límite de ganancias 10×</h3>
                  <p class="mt-1 text-sm text-neutral-600 dark:text-neutral-400">Tus ganancias están limitadas a 10× de tu compra de membresía. Al llegar al tope, renueva para seguir acumulando.</p>
                </div>
                <span id="earn-status" class="hidden shrink-0 items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium bg-amber-500/10 text-amber-700 ring-1 ring-inset ring-amber-500/30 dark:bg-amber-400/10 dark:text-amber-300 dark:ring-amber-400/30">
                  <i data-lucide="alert-triangle" class="h-3.5 w-3.5"></i>
                  Tope alcanzado
                </span>
              </div>
              <div class="mt-4">
                <div class="w-full h-2 rounded-full bg-neutral-200 dark:bg-white/10 overflow-hidden">
                  <div id="earn-progress" class="h-2 rounded-full bg-neutral-900 dark:bg-neutral-200" style="width: 0%"></div>
                </div>
                <div class="mt-2 flex items-center justify-between text-sm">
                  <span id="earn-amount" class="font-medium text-neutral-800 dark:text-neutral-200">Ganado: $0 de $0</span>
                  <span id="earn-percent" class="text-neutral-600 dark:text-neutral-400">0%</span>
                </div>
              </div>
              <div id="earn-cta" class="mt-4 hidden">
                <button class="inline-flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium bg-neutral-900 text-white hover:bg-neutral-800 ring-1 ring-inset ring-neutral-900/10 dark:bg-white/10 dark:text-neutral-100 dark:hover:bg-white/15 dark:ring-white/10" onclick="onPurchase('Upgrade')">
                  <i data-lucide="arrow-up-right" class="h-4 w-4"></i>
                  Renovar / Subir de plan
                </button>
              </div>
            </div>
          </section>

          <!-- Right column (5/12) -->
          <aside class="lg:col-span-5 space-y-6">
            <!-- Comprar Membresía -->
            <div class="rounded-xl ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-white dark:bg-white/5 p-5">
              <div class="flex items-start justify-between">
                <h3 class="text-lg md:text-xl tracking-tight font-semibold text-neutral-900 dark:text-white">Elige tu plan</h3>
              </div>
              <div class="mt-4 grid grid-cols-1 sm:grid-cols-3 gap-4">
                <!-- Basic -->
                <div class="relative rounded-lg p-4 ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-neutral-50/60 dark:bg-white/[0.03]">
                  <div class="flex items-center justify-between">
                    <h4 class="text-base font-medium text-neutral-900 dark:text-white">Basic</h4>
                    <span id="plan-badge-Basic" class="hidden text-[11px] rounded-full px-2 py-0.5 font-medium bg-neutral-900 text-white dark:bg-white/10 dark:text-neutral-100 ring-1 ring-inset ring-neutral-900/10 dark:ring-white/10">Tu plan</span>
                  </div>
                  <div class="mt-1 text-2xl font-semibold tracking-tight text-neutral-900 dark:text-white">$49<span class="text-sm font-normal text-neutral-500 dark:text-neutral-400">/mes</span></div>
                  <ul class="mt-3 space-y-1.5 text-sm text-neutral-700 dark:text-neutral-300">
                    <li class="flex items-center gap-2"><i data-lucide="percent" class="h-4 w-4 text-neutral-500 dark:text-neutral-400"></i>10% referidos</li>
                    <li class="flex items-center gap-2"><i data-lucide="wrench" class="h-4 w-4 text-neutral-500 dark:text-neutral-400"></i>Herramientas básicas</li>
                    <li class="flex items-center gap-2"><i data-lucide="life-buoy" class="h-4 w-4 text-neutral-500 dark:text-neutral-400"></i>Soporte estándar</li>
                  </ul>
                  <button class="mt-4 w-full inline-flex items-center justify-center gap-2 rounded-md px-3 py-2 text-sm font-medium bg-white hover:bg-neutral-50 text-neutral-800 ring-1 ring-inset ring-neutral-300 dark:bg-white/10 dark:text-neutral-200 dark:hover:bg-white/15 dark:ring-white/10" onclick="onPurchase('Basic')">
                    <i data-lucide="shopping-cart" class="h-4 w-4"></i>
                    Comprar
                  </button>
                </div>
                <!-- Advanced -->
                <div class="relative rounded-lg p-4 ring-2 ring-inset ring-neutral-900/10 dark:ring-white/20 bg-white dark:bg-white/5">
                  <div class="flex items-center justify-between">
                    <h4 class="text-base font-medium text-neutral-900 dark:text-white">Advanced</h4>
                    <span id="plan-badge-Advanced" class="hidden text-[11px] rounded-full px-2 py-0.5 font-medium bg-neutral-900 text-white dark:bg-white/10 dark:text-neutral-100 ring-1 ring-inset ring-neutral-900/10 dark:ring-white/10">Tu plan</span>
                  </div>
                  <div class="mt-1 text-2xl font-semibold tracking-tight text-neutral-900 dark:text-white">$99<span class="text-sm font-normal text-neutral-500 dark:text-neutral-400">/mes</span></div>
                  <ul class="mt-3 space-y-1.5 text-sm text-neutral-700 dark:text-neutral-300">
                    <li class="flex items-center gap-2"><i data-lucide="percent" class="h-4 w-4 text-neutral-500 dark:text-neutral-400"></i>15% referidos</li>
                    <li class="flex items-center gap-2"><i data-lucide="wrench" class="h-4 w-4 text-neutral-500 dark:text-neutral-400"></i>Herramientas avanzadas</li>
                    <li class="flex items-center gap-2"><i data-lucide="bolt" class="h-4 w-4 text-neutral-500 dark:text-neutral-400"></i>Soporte prioritario</li>
                  </ul>
                  <button class="mt-4 w-full inline-flex items-center justify-center gap-2 rounded-md px-3 py-2 text-sm font-medium bg-neutral-900 text-white hover:bg-neutral-800 ring-1 ring-inset ring-neutral-900/10 dark:bg-white/10 dark:text-neutral-100 dark:hover:bg-white/15 dark:ring-white/10" onclick="onPurchase('Advanced')">
                    <i data-lucide="arrow-up-right" class="h-4 w-4"></i>
                    Mejorar plan
                  </button>
                </div>
                <!-- Pro (Recomendado) -->
                <div class="relative rounded-lg p-4 ring-2 ring-inset ring-emerald-500/40 bg-emerald-500/5 dark:bg-emerald-400/5">
                  <div class="absolute right-3 top-3 inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px] font-medium bg-emerald-600 text-white dark:bg-emerald-500/90">Recomendado</div>
                  <div class="flex items-center justify-between">
                    <h4 class="text-base font-medium text-neutral-900 dark:text-white">Pro</h4>
                    <span id="plan-badge-Pro" class="hidden text-[11px] rounded-full px-2 py-0.5 font-medium bg-neutral-900 text-white dark:bg-white/10 dark:text-neutral-100 ring-1 ring-inset ring-neutral-900/10 dark:ring-white/10">Tu plan</span>
                  </div>
                  <div class="mt-1 text-2xl font-semibold tracking-tight text-neutral-900 dark:text-white">$199<span class="text-sm font-normal text-neutral-600 dark:text-neutral-400">/mes</span></div>
                  <ul class="mt-3 space-y-1.5 text-sm text-neutral-800 dark:text-neutral-200">
                    <li class="flex items-center gap-2"><i data-lucide="percent" class="h-4 w-4 text-emerald-700 dark:text-emerald-400"></i>20% referidos</li>
                    <li class="flex items-center gap-2"><i data-lucide="sparkles" class="h-4 w-4 text-emerald-700 dark:text-emerald-400"></i>Suite completa de herramientas</li>
                    <li class="flex items-center gap-2"><i data-lucide="headphones" class="h-4 w-4 text-emerald-700 dark:text-emerald-400"></i>Soporte 24/7</li>
                  </ul>
                  <button class="mt-4 w-full inline-flex items-center justify-center gap-2 rounded-md px-3 py-2 text-sm font-medium bg-emerald-600 text-white hover:bg-emerald-700 ring-1 ring-inset ring-emerald-700/10 dark:ring-emerald-400/20" onclick="onPurchase('Pro')">
                    <i data-lucide="shopping-bag" class="h-4 w-4"></i>
                    Comprar Pro
                  </button>
                </div>
              </div>
            </div>

            <!-- Gráfica vertical de 4 niveles -->
            <div class="rounded-xl ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10 bg-white dark:bg-white/5 p-5">
              <div class="flex items-start justify-between">
                <h3 class="text-lg md:text-xl tracking-tight font-semibold text-neutral-900 dark:text-white">Niveles de comisión</h3>
              </div>
              <div class="mt-4 space-y-3">
                <!-- Level Item Template repeated -->
                <div id="level-1" class="relative overflow-hidden rounded-lg ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10">
                  <div class="flex">
                    <div class="w-1.5 bg-neutral-900 dark:bg-neutral-200" id="level-1-bar"></div>
                    <div class="flex-1 p-4">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                          <span class="text-sm font-medium text-neutral-900 dark:text-white">Nivel 1</span>
                          <span class="text-xs text-neutral-600 dark:text-neutral-400">20%</span>
                        </div>
                        <div class="relative group">
                          <span id="level-1-state" class="inline-flex items-center gap-1 text-xs font-medium rounded-full px-2 py-0.5 ring-1 ring-inset">
                            <i data-lucide="check" class="h-3.5 w-3.5"></i>
                            <span>Desbloqueado</span>
                          </span>
                          <div class="pointer-events-none absolute right-0 top-full mt-2 hidden w-64 rounded-md bg-neutral-900 text-neutral-100 p-2 text-xs shadow-lg ring-1 ring-inset ring-black/30 group-hover:block">Disponible en cualquier plan.</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="level-2" class="relative overflow-hidden rounded-lg ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10">
                  <div class="flex">
                    <div class="w-1.5 bg-neutral-300 dark:bg-white/15" id="level-2-bar"></div>
                    <div class="flex-1 p-4">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                          <span class="text-sm font-medium text-neutral-900 dark:text-white">Nivel 2</span>
                          <span class="text-xs text-neutral-600 dark:text-neutral-400">7%</span>
                        </div>
                        <div class="relative group">
                          <span id="level-2-state" class="inline-flex items-center gap-1 text-xs font-medium rounded-full px-2 py-0.5 ring-1 ring-inset">
                            <i data-lucide="lock" class="h-3.5 w-3.5"></i>
                            <span>Bloqueado</span>
                          </span>
                          <div class="pointer-events-none absolute right-0 top-full mt-2 hidden w-64 rounded-md bg-neutral-900 text-neutral-100 p-2 text-xs shadow-lg ring-1 ring-inset ring-black/30 group-hover:block">Requiere plan Advanced.</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="level-3" class="relative overflow-hidden rounded-lg ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10">
                  <div class="flex">
                    <div class="w-1.5 bg-neutral-300 dark:bg-white/15" id="level-3-bar"></div>
                    <div class="flex-1 p-4">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                          <span class="text-sm font-medium text-neutral-900 dark:text-white">Nivel 3</span>
                          <span class="text-xs text-neutral-600 dark:text-neutral-400">7%</span>
                        </div>
                        <div class="relative group">
                          <span id="level-3-state" class="inline-flex items-center gap-1 text-xs font-medium rounded-full px-2 py-0.5 ring-1 ring-inset">
                            <i data-lucide="lock" class="h-3.5 w-3.5"></i>
                            <span>Bloqueado</span>
                          </span>
                          <div class="pointer-events-none absolute right-0 top-full mt-2 hidden w-64 rounded-md bg-neutral-900 text-neutral-100 p-2 text-xs shadow-lg ring-1 ring-inset ring-black/30 group-hover:block">Requiere plan Pro o 5 referidos activos.</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="level-4" class="relative overflow-hidden rounded-lg ring-1 ring-inset ring-neutral-200/80 dark:ring-white/10">
                  <div class="flex">
                    <div class="w-1.5 bg-neutral-300 dark:bg-white/15" id="level-4-bar"></div>
                    <div class="flex-1 p-4">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                          <span class="text-sm font-medium text-neutral-900 dark:text-white">Nivel 4</span>
                          <span class="text-xs text-neutral-600 dark:text-neutral-400">7%</span>
                        </div>
                        <div class="relative group">
                          <span id="level-4-state" class="inline-flex items-center gap-1 text-xs font-medium rounded-full px-2 py-0.5 ring-1 ring-inset">
                            <i data-lucide="lock" class="h-3.5 w-3.5"></i>
                            <span>Bloqueado</span>
                          </span>
                          <div class="pointer-events-none absolute right-0 top-full mt-2 hidden w-64 rounded-md bg-neutral-900 text-neutral-100 p-2 text-xs shadow-lg ring-1 ring-inset ring-black/30 group-hover:block">Requiere plan Pro y 10 referidos activos.</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </aside>
        </div>
      </main>

      <footer class="mx-auto max-w-6xl px-6 sm:px-8 py-8 text-xs text-neutral-600 dark:text-neutral-400 border-t border-neutral-200/70 dark:border-white/10">
        © 2025. Programa de Referidos.
      </footer>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-4 right-4 z-50 hidden">
      <div class="rounded-lg bg-neutral-900 text-white px-3 py-2 text-sm shadow-lg ring-1 ring-inset ring-black/20 dark:bg-white dark:text-neutral-900 dark:ring-black/10">
        <span id="toast-text">Copiado</span>
      </div>
    </div>

    <script>
      // ----- Estado (modifica estos valores) -----
      const state = {
        plan: 'Advanced', // Basic | Advanced | Pro
        prices: { Basic: 49, Advanced: 99, Pro: 199 },
        membershipExpiry: '31 Dic 2025',
        left: {
          url: 'https://tudominio.com/r/ABCD123?side=left',
          activeRefs: 12,
          totalRefs: 47
        },
        right: {
          url: 'https://tudominio.com/r/ABCD123?side=right',
          activeRefs: 9,
          totalRefs: 33
        },
        promo: { points: 620, goal: 1000, deadline: '31 Dic 2025' },
        earnings: { ganadoActual: 840 } // Cambia para probar el 10×
      };

      // ----- Utilidades -----
      function showToast(message) {
        const toast = document.getElementById('toast');
        const text = document.getElementById('toast-text');
        text.textContent = message;
        toast.classList.remove('hidden');
        clearTimeout(window.__toastTimer);
        window.__toastTimer = setTimeout(() => {
          toast.classList.add('hidden');
        }, 2000);
      }

      function selectAllOnFocus(el) {
        el.addEventListener('focus', () => el.select());
        el.addEventListener('click', () => el.select());
      }

      function formatCurrency(n) {
        try {
          return n.toLocaleString('es-ES', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });
        } catch {
          return '$' + Math.round(n);
        }
      }

      // ----- Tema (claro/oscuro) -----
      function applyTheme() {
        const saved = localStorage.getItem('theme');
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const isDark = saved ? saved === 'dark' : prefersDark;
        document.body.classList.toggle('dark', isDark);
        const icon = document.querySelector('#theme-toggle i');
        if (icon) {
          icon.setAttribute('data-lucide', isDark ? 'sun' : 'moon');
          window.lucide && window.lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
        }
      }

      // ----- Inicialización de UI -----
      function initUI() {
        // Header membership
        const badge = document.getElementById('membership-badge');
        const label = document.getElementById('membership-label');
        const exp = document.getElementById('membership-exp');
        label.textContent = state.plan;
        exp.textContent = 'Expira: ' + state.membershipExpiry;

        // Links
        const urlLeft = document.getElementById('url-left');
        const urlRight = document.getElementById('url-right');
        urlLeft.value = state.left.url;
        urlRight.value = state.right.url;
        selectAllOnFocus(urlLeft);
        selectAllOnFocus(urlRight);

        document.getElementById('counters-left').textContent = `Referidos activos: ${state.left.activeRefs} | Referidos totales: ${state.left.totalRefs}`;
        document.getElementById('counters-right').textContent = `Referidos activos: ${state.right.activeRefs} | Referidos totales: ${state.right.totalRefs}`;

        // Promo
        const pct = state.promo.goal > 0 ? Math.min(100, Math.round((state.promo.points / state.promo.goal) * 100)) : 0;
        document.getElementById('promo-deadline').textContent = 'Termina: ' + state.promo.deadline;
        document.getElementById('promo-progress').style.width = pct + '%';
        document.getElementById('promo-percent').textContent = pct + '%';
        document.getElementById('promo-points').textContent = `Puntos: ${state.promo.points}/${state.promo.goal}`;

        // Earnings 10×
        const tope10x = 10 * (state.prices[state.plan] || 0);
        const ganado = state.earnings.ganadoActual || 0;
        const earnPct = tope10x > 0 ? Math.min(100, Math.round((ganado / tope10x) * 100)) : 0;
        document.getElementById('earn-progress').style.width = earnPct + '%';
        document.getElementById('earn-amount').textContent = `Ganado: ${formatCurrency(ganado)} de ${formatCurrency(tope10x)}`;
        document.getElementById('earn-percent').textContent = earnPct + '%';

        const reached = earnPct >= 100;
        document.getElementById('earn-status').classList.toggle('hidden', !reached);
        document.getElementById('earn-cta').classList.toggle('hidden', !reached);

        // Plan badges
        ['Basic','Advanced','Pro'].forEach(p => {
          const el = document.getElementById('plan-badge-' + p);
          if (el) el.classList.toggle('hidden', state.plan !== p);
        });

        // Levels logic
        const activeRefsTotal = (state.left.activeRefs || 0) + (state.right.activeRefs || 0);
        const levels = [
          { id: 1, pct: '20%', unlocked: true, req: 'Disponible en cualquier plan.' },
          { id: 2, pct: '7%', unlocked: state.plan !== 'Basic', req: 'Requiere plan Advanced.' },
          { id: 3, pct: '7%', unlocked: (state.plan === 'Pro') || activeRefsTotal >= 5, req: 'Requiere plan Pro o 5 referidos activos.' },
          { id: 4, pct: '7%', unlocked: (state.plan === 'Pro' && activeRefsTotal >= 10), req: 'Requiere plan Pro y 10 referidos activos.' }
        ];
        levels.forEach(level => {
          const stateEl = document.getElementById(`level-${level.id}-state`);
          const barEl = document.getElementById(`level-${level.id}-bar`);
          const itemEl = document.getElementById(`level-${level.id}`);
          const icon = stateEl?.querySelector('i');
          const text = stateEl?.querySelector('span:last-child');

          if (level.unlocked) {
            // Solid style
            if (barEl) {
              barEl.classList.remove('bg-neutral-300','dark:bg-white/15');
              barEl.classList.add('bg-neutral-900','dark:bg-neutral-200');
            }
            if (stateEl) {
              stateEl.className = 'inline-flex items-center gap-1 text-xs font-medium rounded-full px-2 py-0.5 ring-1 ring-inset bg-emerald-500/10 text-emerald-700 ring-emerald-500/30 dark:bg-emerald-400/10 dark:text-emerald-300 dark:ring-emerald-400/30';
            }
            if (icon) {
              icon.setAttribute('data-lucide', 'check');
            }
            if (text) text.textContent = 'Desbloqueado';
          } else {
            // Disabled style
            if (barEl) {
              barEl.classList.remove('bg-neutral-900','dark:bg-neutral-200');
              barEl.classList.add('bg-neutral-300','dark:bg-white/15');
            }
            if (stateEl) {
              stateEl.className = 'inline-flex items-center gap-1 text-xs font-medium rounded-full px-2 py-0.5 ring-1 ring-inset bg-neutral-200/60 text-neutral-700 ring-neutral-300 dark:bg-white/10 dark:text-neutral-300 dark:ring-white/10';
            }
            if (icon) {
              icon.setAttribute('data-lucide', 'lock');
            }
            if (text) text.textContent = 'Bloqueado';
          }

          // Tooltip text
          const tooltip = itemEl?.querySelector('.group + .pointer-events-none, .group .pointer-events-none');
          // Already provided in HTML content, no need to replace here.
        });

        // Re-render lucide icons after dynamic changes
        window.lucide && window.lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
      }

      // ----- Acciones -----
      async function copyToClipboard(text) {
        try {
          await navigator.clipboard.writeText(text);
          showToast('Copiado');
        } catch {
          // Fallback
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.setAttribute('readonly', '');
          ta.style.position = 'absolute';
          ta.style.left = '-9999px';
          document.body.appendChild(ta);
          ta.select();
          try { document.execCommand('copy'); showToast('Copiado'); } catch {}
          document.body.removeChild(ta);
        }
      }

      async function shareLink(text, url) {
        if (navigator.share) {
          try {
            await navigator.share({ title: 'Mi enlace de referidos', text, url });
            showToast('Compartido');
          } catch (e) {
            if (e && e.name !== 'AbortError') showToast('No se pudo compartir');
          }
        } else {
          await copyToClipboard(url);
          showToast('Enlace copiado para compartir');
        }
      }

      function onPurchase(plan) {
        console.log('onPurchase:', plan);
        showToast(`Acción: ${plan}`);
      }

      // ----- Eventos -----
      window.addEventListener('DOMContentLoaded', () => {
        // Theme init
        applyTheme();
        document.getElementById('theme-toggle').addEventListener('click', () => {
          const isDark = document.body.classList.toggle('dark');
          localStorage.setItem('theme', isDark ? 'dark' : 'light');
          applyTheme();
        });

        // Icon render
        if (window.lucide) {
          window.lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
        }

        // Populate UI
        initUI();

        // Copy/Share events
        document.querySelectorAll('button[data-copy]').forEach(btn => {
          btn.addEventListener('click', () => {
            const side = btn.getAttribute('data-copy');
            const input = document.getElementById('url-' + side);
            if (input) copyToClipboard(input.value);
          });
        });
        document.querySelectorAll('button[data-share]').forEach(btn => {
          btn.addEventListener('click', () => {
            const side = btn.getAttribute('data-share');
            const input = document.getElementById('url-' + side);
            if (input) shareLink('Únete usando mi enlace', input.value);
          });
        });
      });
    </script>
  </body>
</html>