<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Open Game — Casino</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>
  <body class="antialiased bg-neutral-950 text-neutral-100 selection:bg-white/10" style="font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, Apple Color Emoji, Segoe UI Emoji;">
    <div class="relative min-h-dvh overflow-hidden">
      <!-- Dynamic Background Layers -->
      <div class="pointer-events-none absolute inset-0">
        <!-- Gradient glows -->
        <div id="bg-glow-1" class="absolute -top-40 -left-40 h-[480px] w-[480px] rounded-full blur-3xl opacity-40" style="background: radial-gradient(closest-side, rgba(16,185,129,0.35), transparent 70%); will-change: transform;"></div>
        <div id="bg-glow-2" class="absolute -bottom-40 -right-32 h-[520px] w-[520px] rounded-full blur-3xl opacity-40" style="background: radial-gradient(closest-side, rgba(34,211,238,0.35), transparent 70%); will-change: transform;"></div>
        <!-- Subtle noise overlay -->
        <div class="absolute inset-0 opacity-[0.06] mix-blend-screen" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22 viewBox=%220 0 40 40%22><rect width=%2240%22 height=%2240%22 fill=%22black%22/><g fill=%22white%22 opacity=%220.18%22><circle cx=%222%22 cy=%222%22 r=%221%22/><circle cx=%2220%22 cy=%2211%22 r=%220.6%22/><circle cx=%2215%22 cy=%2229%22 r=%220.8%22/><circle cx=%2234%22 cy=%2218%22 r=%220.7%22/></g></svg>');"></div>
        <!-- Parallax tokens/cards -->
        <div id="parallax" class="absolute inset-0">
          <!-- Chip -->
          <div class="absolute top-[12%] left-[8%] h-16 w-16 rounded-full ring-2 ring-white/30 bg-gradient-to-br from-emerald-400/40 to-emerald-600/40 shadow-[0_0_30px_rgba(16,185,129,0.35)]" data-depth="0.05" style="backdrop-filter: blur(0px); will-change: transform;"></div>
          <!-- Card -->
          <div class="absolute top-[22%] right-[12%] h-24 w-16 rounded-lg bg-white/5 ring-1 ring-white/15 shadow-[0_0_24px_rgba(255,255,255,0.08)] rotate-12" data-depth="0.04" style="backdrop-filter: blur(2px); will-change: transform;"></div>
          <!-- Roulette ring -->
          <div class="absolute bottom-[14%] left-[20%] h-24 w-24 rounded-full ring-4 ring-cyan-400/40 shadow-[0_0_36px_rgba(34,211,238,0.35)]" data-depth="0.03" style="will-change: transform;"></div>
          <!-- Chip -->
          <div class="absolute bottom-[10%] right-[10%] h-12 w-12 rounded-full ring-2 ring-white/25 bg-gradient-to-br from-cyan-300/40 to-cyan-500/40 shadow-[0_0_28px_rgba(34,211,238,0.35)] -rotate-6" data-depth="0.06" style="will-change: transform;"></div>
        </div>
        <!-- Floating particles -->
        <div id="particles" class="absolute inset-0 pointer-events-none"></div>
      </div>

      <!-- Header -->
      <header class="relative z-20 border-b border-white/10 backdrop-blur supports-[backdrop-filter]:bg-neutral-950/40">
        <div class="mx-auto max-w-7xl px-6 lg:px-8 py-4 flex items-center justify-between gap-4">
          <div class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-xl ring-1 ring-white/10 bg-white/5 flex items-center justify-center">
              <i data-lucide="sparkles" class="h-5 w-5 text-emerald-400"></i>
            </div>
            <div class="flex flex-col">
              <h1 class="text-2xl md:text-3xl tracking-tight font-semibold text-white">Open Game</h1>
              <p class="text-xs text-neutral-400">Casino Online · Sala de juego</p>
            </div>
          </div>
          <div class="flex items-center gap-2 sm:gap-3">
            <div class="hidden md:flex items-center gap-2 rounded-lg ring-1 ring-white/10 bg-white/5 px-2.5 py-1.5">
              <i data-lucide="wallet" class="h-4 w-4 text-cyan-300"></i>
              <span id="balance" class="text-sm font-medium">Saldo: $1,250.00</span>
            </div>
            <button id="deposit-btn" class="inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium bg-emerald-500 text-white hover:bg-emerald-400 ring-1 ring-emerald-300/20 shadow-[0_0_24px_rgba(16,185,129,0.35)]">
              <i data-lucide="credit-card" class="h-4 w-4"></i>
              Depositar
            </button>
            <div class="hidden sm:flex items-center gap-1">
              <button id="hdr-sound" class="inline-flex items-center justify-center rounded-lg p-2 ring-1 ring-white/10 bg-white/5 hover:bg-white/10" title="Sonido">
                <i data-lucide="volume-2" class="h-4 w-4"></i>
              </button>
              <button id="hdr-fs" class="inline-flex items-center justify-center rounded-lg p-2 ring-1 ring-white/10 bg-white/5 hover:bg-white/10" title="Pantalla completa">
                <i data-lucide="maximize-2" class="h-4 w-4"></i>
              </button>
              <button id="hdr-help" class="inline-flex items-center justify-center rounded-lg p-2 ring-1 ring-white/10 bg-white/5 hover:bg-white/10" title="Ayuda">
                <i data-lucide="help-circle" class="h-4 w-4"></i>
              </button>
            </div>
            <button id="panel-toggle" class="inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium ring-1 ring-white/10 bg-white/5 hover:bg-white/10">
              <i data-lucide="message-square" class="h-4 w-4"></i>
              <span class="hidden sm:inline">Panel</span>
            </button>
          </div>
        </div>
        <!-- Ticker / Marquee -->
        <div class="border-t border-white/10">
          <div class="relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-transparent pointer-events-none"></div>
            <div id="ticker" class="whitespace-nowrap flex items-center gap-8 py-2 text-sm text-neutral-300">
              <div id="ticker-track" class="flex gap-8 will-change-transform px-6 lg:px-8"></div>
            </div>
          </div>
        </div>
      </header>

      <!-- Main area -->
      <main class="relative z-10">
        <div class="mx-auto max-w-7xl px-6 lg:px-8 py-8 lg:py-10">
          <!-- Game container -->
          <div id="game-container" class="relative">
            <!-- Frame wrapper with animated outline/glow -->
            <div class="relative mx-auto max-w-6xl">
              <!-- Gradient border frame -->
              <div class="relative p-[2px] rounded-2xl bg-gradient-to-r from-emerald-500 via-cyan-400 to-emerald-500 shadow-[0_0_60px_rgba(16,185,129,0.2)]">
                <div id="game-shell" class="relative rounded-2xl bg-neutral-950 ring-1 ring-white/10 overflow-hidden">
                  <!-- Aspect wrapper -->
                  <div id="game-aspect" class="aspect-[16/9] w-full">
                    <!-- Replace this with your <iframe> or <canvas> -->
                    <div class="h-full w-full bg-[radial-gradient(ellipse_at_center,rgba(34,211,238,0.08),rgba(0,0,0,0.6))] flex items-center justify-center relative">
                      <div class="text-center">
                        <div class="inline-flex items-center justify-center h-16 w-16 rounded-full bg-emerald-500/20 ring-1 ring-emerald-400/40 mb-3 shadow-[0_0_26px_rgba(16,185,129,0.35)]">
                          <i data-lucide="joystick" class="h-7 w-7 text-emerald-400"></i>
                        </div>
                        <h2 class="text-xl md:text-2xl tracking-tight font-semibold">Tu juego aquí</h2>
                        <p class="text-sm text-neutral-400">Inserta un iframe o canvas dentro de este contenedor.</p>
                      </div>

                      <!-- Shine sweep -->
                      <div id="shine" class="pointer-events-none absolute -left-1/3 top-0 h-full w-1/3 rotate-6 opacity-0" style="background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(34,211,238,0.12) 45%, rgba(16,185,129,0.14) 55%, rgba(255,255,255,0) 100%);"></div>
                    </div>
                  </div>

                  <!-- Overlay Controls -->
                  <div class="pointer-events-none absolute inset-0">
                    <!-- Top bar controls -->
                    <div class="pointer-events-auto absolute top-3 right-3 flex items-center gap-2">
                      <!-- Aspect toggle (custom segmented) -->
                      <div class="inline-flex items-center rounded-lg ring-1 ring-white/10 bg-white/5 overflow-hidden">
                        <button id="btn-16-9" class="px-2.5 py-1.5 text-xs font-medium hover:bg-white/10">16:9</button>
                        <button id="btn-3-4" class="px-2.5 py-1.5 text-xs font-medium hover:bg-white/10">3:4</button>
                      </div>
                      <button id="btn-reload" class="inline-flex items-center justify-center rounded-lg p-2 ring-1 ring-white/10 bg-white/5 hover:bg-white/10" title="Recargar">
                        <i data-lucide="rotate-cw" class="h-4 w-4"></i>
                      </button>
                      <button id="btn-mute" class="inline-flex items-center justify-center rounded-lg p-2 ring-1 ring-white/10 bg-white/5 hover:bg-white/10" title="Silencio">
                        <i data-lucide="volume-2" class="h-4 w-4"></i>
                      </button>
                      <button id="btn-fs" class="inline-flex items-center justify-center rounded-lg p-2 ring-1 ring-white/10 bg-white/5 hover:bg-white/10" title="Pantalla completa">
                        <i data-lucide="maximize-2" class="h-4 w-4"></i>
                      </button>
                    </div>
                    <!-- Bottom center Play -->
                    <div class="pointer-events-auto absolute bottom-4 left-1/2 -translate-x-1/2">
                      <button id="btn-play" class="inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium bg-emerald-500 text-white hover:bg-emerald-400 ring-1 ring-emerald-300/20 shadow-[0_0_28px_rgba(16,185,129,0.35)]">
                        <i data-lucide="play" class="h-4 w-4"></i>
                        Jugar
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Subtle inner glow -->
              <div class="pointer-events-none absolute inset-0 rounded-2xl ring-1 ring-white/5"></div>
            </div>
          </div>

          <!-- Helper row under game -->
          <div class="mt-4 flex items-center justify-between gap-3 text-xs text-neutral-400">
            <div class="flex items-center gap-2">
              <i data-lucide="shield-check" class="h-4 w-4 text-emerald-400"></i>
              Conexión segura · RTP certificado
            </div>
            <div class="hidden sm:flex items-center gap-3">
              <div class="flex items-center gap-2">
                <i data-lucide="cpu" class="h-4 w-4 text-cyan-300"></i>
                Animaciones optimizadas
              </div>
              <div class="flex items-center gap-2">
                <i data-lucide="zap" class="h-4 w-4 text-emerald-400"></i>
                Baja latencia
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Collapsible Side Panel (desktop) / Modal (mobile) -->
      <div id="sidepanel-overlay" class="fixed inset-0 z-40 bg-black/40 opacity-0 pointer-events-none transition-opacity"></div>
      <aside id="sidepanel" class="fixed right-0 top-0 z-50 h-full w-full sm:w-[480px] max-w-full translate-x-full transition-transform">
        <div class="h-full flex flex-col bg-neutral-950/95 backdrop-blur ring-1 ring-white/10">
          <div class="flex items-center justify-between px-5 py-4 border-b border-white/10">
            <div class="flex items-center gap-2">
              <i data-lucide="panel-right" class="h-5 w-5 text-cyan-300"></i>
              <span class="text-sm font-medium">Panel de juego</span>
            </div>
            <button id="panel-close" class="rounded-lg p-2 ring-1 ring-white/10 bg-white/5 hover:bg-white/10">
              <i data-lucide="x" class="h-4 w-4"></i>
            </button>
          </div>
          <!-- Tabs -->
          <div class="px-4 pt-3">
            <div class="inline-flex items-center rounded-lg ring-1 ring-white/10 bg-white/5 overflow-hidden">
              <button data-tab="chat" class="px-3 py-1.5 text-sm font-medium tab-btn bg-white/0 hover:bg-white/10">Chat</button>
              <button data-tab="history" class="px-3 py-1.5 text-sm font-medium tab-btn hover:bg-white/10">Historial</button>
              <button data-tab="rules" class="px-3 py-1.5 text-sm font-medium tab-btn hover:bg-white/10">Reglas</button>
              <button data-tab="payouts" class="px-3 py-1.5 text-sm font-medium tab-btn hover:bg-white/10">Pagos</button>
            </div>
          </div>
          <!-- Content -->
          <div class="flex-1 overflow-y-auto px-5 py-4 space-y-6">
            <!-- Chat -->
            <div id="tab-chat" class="space-y-3">
              <div class="text-sm text-neutral-400">Bienvenido al chat. Respeta las normas.</div>
              <div class="space-y-2">
                <div class="flex items-start gap-2">
                  <div class="h-7 w-7 rounded-full bg-white/10 ring-1 ring-white/10 flex items-center justify-center">
                    <i data-lucide="user" class="h-4 w-4 text-neutral-300"></i>
                  </div>
                  <div>
                    <div class="text-xs text-neutral-400">Dealer · ahora</div>
                    <div class="text-sm">¡Suerte en la mesa!</div>
                  </div>
                </div>
                <div class="flex items-start gap-2">
                  <div class="h-7 w-7 rounded-full bg-white/10 ring-1 ring-white/10 flex items-center justify-center">
                    <i data-lucide="user" class="h-4 w-4 text-neutral-300"></i>
                  </div>
                  <div>
                    <div class="text-xs text-neutral-400">Tú · hace 1m</div>
                    <div class="text-sm">Vamos con todo.</div>
                  </div>
                </div>
              </div>
            </div>
            <!-- History -->
            <div id="tab-history" class="hidden">
              <div class="text-sm text-neutral-300 mb-2">Últimas jugadas</div>
              <div class="divide-y divide-white/5 ring-1 ring-white/10 rounded-lg overflow-hidden">
                <div class="flex items-center justify-between px-3 py-2 bg-white/5">
                  <div class="flex items-center gap-2">
                    <i data-lucide="clock" class="h-4 w-4 text-neutral-400"></i>
                    <span class="text-sm">12:31</span>
                  </div>
                  <div class="text-sm text-emerald-400">+$25</div>
                </div>
                <div class="flex items-center justify-between px-3 py-2">
                  <div class="flex items-center gap-2">
                    <i data-lucide="clock" class="h-4 w-4 text-neutral-400"></i>
                    <span class="text-sm">12:28</span>
                  </div>
                  <div class="text-sm text-red-400">-$10</div>
                </div>
                <div class="flex items-center justify-between px-3 py-2 bg-white/5">
                  <div class="flex items-center gap-2">
                    <i data-lucide="clock" class="h-4 w-4 text-neutral-400"></i>
                    <span class="text-sm">12:24</span>
                  </div>
                  <div class="text-sm text-emerald-400">+$120</div>
                </div>
              </div>
            </div>
            <!-- Rules -->
            <div id="tab-rules" class="hidden">
              <div class="text-sm text-neutral-300 mb-2">Reglas del juego</div>
              <ul class="space-y-2 text-sm text-neutral-300">
                <li class="flex gap-2"><i data-lucide="dot" class="h-4 w-4 text-neutral-500"></i> El objetivo es alcanzar la mejor mano.</li>
                <li class="flex gap-2"><i data-lucide="dot" class="h-4 w-4 text-neutral-500"></i> Mínimo de apuesta: $1. Máximo depende de la mesa.</li>
                <li class="flex gap-2"><i data-lucide="dot" class="h-4 w-4 text-neutral-500"></i> Pagos según la tabla de premios.</li>
              </ul>
            </div>
            <!-- Payouts -->
            <div id="tab-payouts" class="hidden">
              <div class="text-sm text-neutral-300 mb-2">Tabla de pagos</div>
              <div class="grid grid-cols-2 gap-2 text-sm">
                <div class="rounded-lg ring-1 ring-white/10 bg-white/5 p-3">
                  <div class="text-neutral-400">Par</div>
                  <div class="text-emerald-400 font-medium">1:1</div>
                </div>
                <div class="rounded-lg ring-1 ring-white/10 bg-white/5 p-3">
                  <div class="text-neutral-400">Color</div>
                  <div class="text-emerald-400 font-medium">2:1</div>
                </div>
                <div class="rounded-lg ring-1 ring-white/10 bg-white/5 p-3">
                  <div class="text-neutral-400">Escalera</div>
                  <div class="text-emerald-400 font-medium">5:1</div>
                </div>
                <div class="rounded-lg ring-1 ring-white/10 bg-white/5 p-3">
                  <div class="text-neutral-400">Full</div>
                  <div class="text-emerald-400 font-medium">8:1</div>
                </div>
              </div>
            </div>
          </div>
          <!-- Input for chat -->
          <div class="px-5 py-4 border-t border-white/10">
            <div class="flex items-center gap-2">
              <input type="text" placeholder="Escribe un mensaje..." class="flex-1 rounded-lg bg-white/5 ring-1 ring-white/10 px-3 py-2.5 text-sm focus:outline-none placeholder:text-neutral-500">
              <button class="rounded-lg px-3 py-2 text-sm font-medium bg-cyan-500 text-white hover:bg-cyan-400 ring-1 ring-cyan-300/20">
                <i data-lucide="send" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </div>
      </aside>

      <!-- Footer -->
      <footer class="relative z-10 mt-8 border-t border-white/10">
        <div class="mx-auto max-w-7xl px-6 lg:px-8 py-6 flex flex-col sm:flex-row items-center justify-between gap-4 text-xs text-neutral-400">
          <div class="flex items-center gap-3">
            <span class="inline-flex items-center gap-1 rounded-full px-2 py-1 ring-1 ring-white/10 bg-white/5">
              <i data-lucide="circle-alert" class="h-3.5 w-3.5 text-emerald-400"></i>
              18+
            </span>
            <span class="inline-flex items-center gap-1 rounded-full px-2 py-1 ring-1 ring-white/10 bg-white/5">
              <i data-lucide="heart-handshake" class="h-3.5 w-3.5 text-cyan-300"></i>
              Juego responsable
            </span>
          </div>
          <div class="flex items-center gap-4">
            <a href="#" class="hover:text-neutral-200">Términos</a>
            <a href="#" class="hover:text-neutral-200">Privacidad</a>
            <a href="#" class="hover:text-neutral-200">Licencias</a>
          </div>
          <div class="relative">
            <select id="lang" class="appearance-none bg-white/5 ring-1 ring-white/10 rounded-lg pl-3 pr-8 py-2 text-xs focus:outline-none">
              <option>Español</option>
              <option>English</option>
              <option>Português</option>
            </select>
            <i data-lucide="chevron-down" class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"></i>
          </div>
        </div>
      </footer>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-4 right-4 z-[100] hidden">
      <div class="rounded-lg bg-white text-neutral-900 px-3 py-2 text-sm shadow-lg ring-1 ring-black/10">
        <span id="toast-text">Acción</span>
      </div>
    </div>

    <script>
      // Utility: icons render
      function renderIcons() { window.lucide && window.lucide.createIcons({ attrs: { 'stroke-width': 1.5 } }); }

      // Toast
      function showToast(msg) {
        const t = document.getElementById('toast'); const tt = document.getElementById('toast-text');
        tt.textContent = msg; t.classList.remove('hidden');
        clearTimeout(window.__t); window.__t = setTimeout(()=>t.classList.add('hidden'), 1800);
      }

      // Ticker data
      const TICKER_ITEMS = [
        'Ganador: @maria ganó $1,200 en Ruleta',
        'Jackpot: @leo cobró $5,000 en Slots',
        'Anuncio: Mantenimiento a las 03:00 UTC',
        'Ganador: @sofia ganó $320 en Blackjack',
        'Promo: 10% extra en tu primer depósito de hoy',
        'Ganador: @david ganó $2,100 en Baccarat'
      ];

      function initTicker() {
        const track = document.getElementById('ticker-track');
        // create two copies for seamless loop
        const makeRow = () => TICKER_ITEMS.map((t,i)=> {
          const item = document.createElement('div');
          item.className = 'flex items-center gap-2';
          const dot = document.createElement('span');
          dot.className = 'h-1.5 w-1.5 rounded-full bg-emerald-400';
          const text = document.createElement('span');
          text.textContent = t;
          item.appendChild(dot); item.appendChild(text);
          return item;
        });
        [...makeRow(), ...makeRow()].forEach(el => track.appendChild(el));

        let x = 0;
        function step() {
          x -= 0.6; // speed
          const w = track.scrollWidth / 2;
          if (-x >= w) x = 0;
          track.style.transform = `translateX(${x}px)`;
          requestAnimationFrame(step);
        }
        step();
      }

      // Aspect toggle
      let aspect = '16:9';
      function setAspect(next) {
        if (aspect === next) return;
        aspect = next;
        const wrapper = document.getElementById('game-aspect');
        wrapper.classList.remove('aspect-[16/9]','aspect-[3/4]','aspect-video');
        if (next === '16:9') wrapper.classList.add('aspect-[16/9]');
        if (next === '3:4') wrapper.classList.add('aspect-[3/4]');
        // Accent feedback
        showToast('Aspecto ' + next);
        // Highlight button
        document.getElementById('btn-16-9').classList.toggle('bg-white/10', aspect==='16:9');
        document.getElementById('btn-3-4').classList.toggle('bg-white/10', aspect==='3:4');
      }

      // Fullscreen
      function toggleFullscreen() {
        const el = document.getElementById('game-shell');
        const isFs = document.fullscreenElement != null;
        if (!isFs) {
          el.requestFullscreen?.(); 
        } else {
          document.exitFullscreen?.();
        }
      }

      // Sound toggle (UI only)
      let muted = false;
      function toggleSound() {
        muted = !muted;
        const iconMain = document.querySelector('#btn-mute i');
        const iconHdr = document.querySelector('#hdr-sound i');
        if (iconMain) iconMain.setAttribute('data-lucide', muted ? 'volume-x' : 'volume-2');
        if (iconHdr) iconHdr.setAttribute('data-lucide', muted ? 'volume-x' : 'volume-2');
        renderIcons();
        showToast(muted ? 'Silenciado' : 'Sonido activado');
      }

      // Shine animation across frame
      function startShine() {
        const el = document.getElementById('shine');
        let x = -33; let opacity = 0;
        function loop() {
          x += 0.35;
          if (x < -33) opacity = 0;
          if (x > -20 && x < 90) opacity = 1;
          if (x >= 110) { x = -33; opacity = 0; }
          el.style.transform = `translateX(${x}%)`;
          el.style.opacity = opacity.toString();
          requestAnimationFrame(loop);
        }
        loop();
      }

      // Parallax
      function initParallax() {
        const layer = document.getElementById('parallax');
        const items = [...layer.querySelectorAll('[data-depth]')];
        let cx = window.innerWidth/2, cy = window.innerHeight/2;
        function onMove(e) {
          const x = (e.clientX ?? cx) - cx;
          const y = (e.clientY ?? cy) - cy;
          items.forEach(el => {
            const d = parseFloat(el.getAttribute('data-depth') || '0.03');
            el.style.transform = `translate3d(${x*d}px, ${y*d}px, 0)`;
          });
          // small background glows drift
          const g1 = document.getElementById('bg-glow-1');
          const g2 = document.getElementById('bg-glow-2');
          if (g1) g1.style.transform = `translate3d(${x*0.01}px, ${y*0.02}px, 0)`;
          if (g2) g2.style.transform = `translate3d(${x*-0.008}px, ${y*-0.012}px, 0)`;
        }
        window.addEventListener('mousemove', onMove);
      }

      // Particles
      function initParticles() {
        const container = document.getElementById('particles');
        const count = Math.min(36, Math.floor(window.innerWidth / 30));
        const parts = [];
        for (let i=0;i<count;i++) {
          const p = document.createElement('div');
          const size = Math.random()*2 + 1.2;
          p.className = 'absolute rounded-full bg-white';
          p.style.width = size+'px';
          p.style.height = size+'px';
          p.style.opacity = (Math.random()*0.35 + 0.15).toFixed(2);
          p.style.filter = 'blur(0.5px)';
          container.appendChild(p);
          parts.push({ el: p, x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, r: Math.random()*Math.PI*2, s: (Math.random()*0.3+0.1), a: Math.random()*0.5+0.2 });
        }
        function step(t) {
          parts.forEach(pt => {
            pt.r += 0.002 * (1+pt.s);
            pt.x += Math.cos(pt.r) * pt.s;
            pt.y += Math.sin(pt.r*1.2) * pt.s*0.8;
            if (pt.x < -10) pt.x = window.innerWidth + 10;
            if (pt.x > window.innerWidth + 10) pt.x = -10;
            if (pt.y < -10) pt.y = window.innerHeight + 10;
            if (pt.y > window.innerHeight + 10) pt.y = -10;
            pt.el.style.transform = `translate3d(${pt.x}px, ${pt.y}px, 0)`;
          });
          requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      }

      // Side panel
      function openPanel(tab='chat') {
        const sp = document.getElementById('sidepanel');
        const ov = document.getElementById('sidepanel-overlay');
        sp.classList.remove('translate-x-full');
        ov.classList.remove('pointer-events-none'); ov.classList.add('opacity-100');
        setActiveTab(tab);
      }
      function closePanel() {
        const sp = document.getElementById('sidepanel');
        const ov = document.getElementById('sidepanel-overlay');
        sp.classList.add('translate-x-full');
        ov.classList.add('pointer-events-none'); ov.classList.remove('opacity-100');
      }

      function setActiveTab(name) {
        const tabs = ['chat','history','rules','payouts'];
        tabs.forEach(t => {
          document.getElementById('tab-'+t)?.classList.toggle('hidden', t!==name);
        });
        document.querySelectorAll('.tab-btn').forEach(btn=>{
          const is = btn.getAttribute('data-tab')===name;
          btn.classList.toggle('bg-white/10', is);
        });
      }

      // Balance mock update on deposit
      function addBalance(amount=50) {
        const el = document.getElementById('balance');
        const text = el.textContent || '';
        const num = Number(text.replace(/[^\d.-]/g,'')) || 0;
        const next = num + amount;
        el.textContent = 'Saldo: $' + next.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        showToast('Depósito acreditado');
      }

      // Header FS sync
      function syncFsIcon() {
        const isFs = document.fullscreenElement != null;
        document.querySelectorAll('#btn-fs i, #hdr-fs i').forEach(ic => ic.setAttribute('data-lucide', isFs ? 'minimize-2' : 'maximize-2'));
        renderIcons();
      }

      window.addEventListener('DOMContentLoaded', () => {
        renderIcons();
        initTicker();
        initParallax();
        initParticles();
        startShine();

        // Aspect toggle buttons
        document.getElementById('btn-16-9').addEventListener('click', ()=> setAspect('16:9'));
        document.getElementById('btn-3-4').addEventListener('click', ()=> setAspect('3:4'));
        // Default highlight
        document.getElementById('btn-16-9').classList.add('bg-white/10');

        // Controls
        document.getElementById('btn-reload').addEventListener('click', ()=> showToast('Recargando juego...'));
        document.getElementById('btn-mute').addEventListener('click', toggleSound);
        document.getElementById('btn-fs').addEventListener('click', toggleFullscreen);
        document.getElementById('btn-play').addEventListener('click', ()=> showToast('Iniciando juego...'));

        // Header controls
        document.getElementById('hdr-sound').addEventListener('click', toggleSound);
        document.getElementById('hdr-fs').addEventListener('click', toggleFullscreen);
        document.getElementById('hdr-help').addEventListener('click', ()=> openPanel('rules'));
        document.getElementById('deposit-btn').addEventListener('click', ()=> addBalance(100));

        // Panel
        document.getElementById('panel-toggle').addEventListener('click', ()=> openPanel('chat'));
        document.getElementById('panel-close').addEventListener('click', closePanel);
        document.getElementById('sidepanel-overlay').addEventListener('click', closePanel);
        document.querySelectorAll('.tab-btn').forEach(btn => btn.addEventListener('click', ()=> setActiveTab(btn.getAttribute('data-tab'))));

        // Fullscreen change
        document.addEventListener('fullscreenchange', syncFsIcon);
      });
    </script>
  </body>
</html>